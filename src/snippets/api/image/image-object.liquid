{% comment %}

  Required arguments:
  - image

  Optional arguments:

{% endcomment %}

{%- if size == blank -%}
  {%- assign size = '400x' -%}
  {%- assign lqip_size = '40x' -%}
{%- else -%}
  {%- assign lqip_size = size | split: 'x' | first | times: 1 | divided_by: 10 | append: 'x' -%}
{%- endif -%}

{
  "id": {{- image.id -}},
  "alt": {{- image.alt | json -}},
  "lqip": {{- image.src | img_url: lqip_size, scale: 1 | json -}},
  "src": {{- image.src | img_url: size, scale: 1 | json -}},
  "src2x": {{- image.src | img_url: size, scale: 2 | json -}},
  "src3x": {{- image.src | img_url: size, scale: 3 | json -}}
}

{%- assign size = nil -%}
{%- assign lqip_size = nil -%}
